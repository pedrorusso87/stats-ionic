{"version":3,"sources":["./src/app/auth/register/register-routing.module.ts","./src/app/auth/register/register.module.ts","./src/app/auth/register/register.page.ts","./src/app/auth/register/register.page.scss","./src/app/auth/register/register.page.html"],"names":[],"mappings":"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","file":"src_app_auth_register_register_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegisterPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RegisterPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegisterPageRoutingModule } from './register-routing.module';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    RegisterPageRoutingModule\r\n  ],\r\n  declarations: [RegisterPage]\r\n})\r\nexport class RegisterPageModule {}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {AuthService} from '../services/auth.service';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {Store} from '@ngrx/store';\r\nimport {Router} from '@angular/router';\r\nimport {LoadingController} from '@ionic/angular';\r\nimport {UserRegistrationRequest} from '../models/user.register';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.page.html',\r\n  styleUrls: ['./register.page.scss'],\r\n})\r\nexport class RegisterPage implements OnInit {\r\n  registerForm: FormGroup;\r\n  email = new FormControl('', Validators.compose([Validators.required,\r\n    Validators.pattern('^([a-zA-Z0-9_\\\\-\\\\.]+)@([a-zA-Z0-9_\\\\-\\\\.]+)\\\\.([a-zA-Z]{2,5})$')]));\r\n  username = new FormControl('', Validators.required);\r\n  password = new FormControl('', Validators.required);\r\n  confirmedPassword = new FormControl('', Validators.required);\r\n  userRegistrationRequest = {} as UserRegistrationRequest\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private fb: FormBuilder,\r\n    private store: Store,\r\n    private loadingController: LoadingController,\r\n    private router: Router\r\n  ) {\r\n    this.registerForm = this.fb.group({\r\n      email: this.email,\r\n      username: this.username,\r\n      password: this.password,\r\n      confirmedPassword: this.confirmedPassword\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  onSubmit(): void {\r\n    this.userRegistrationRequest = {\r\n      username: this.getUsername(),\r\n      email: this.getEmail(),\r\n      password: this.getPassword()\r\n    }\r\n    this.authService.register(this.userRegistrationRequest).subscribe(async response => {\r\n      // check if the new username comes in the response. This means that the register process was successful\r\n      await this.presentLoading();\r\n      if(response && response.username) {\r\n        await this.router.navigate(['/home'])\r\n        await this.loadingController.dismiss();\r\n      }\r\n    });\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: 'Please wait...',\r\n    });\r\n    await loading.present();\r\n  }\r\n\r\n  validatePassword() {\r\n    if (this.getConfirmedPassword() !== this.getPassword()) {\r\n      this.registerForm.get('confirmedPassword').setErrors({ invalid: true })\r\n    } else {\r\n      this.registerForm.get('confirmedPassword').setErrors(null)\r\n    }\r\n  }\r\n\r\n  getEmail(): any {\r\n    return this.registerForm.get('email')?.value;\r\n  }\r\n\r\n  getPassword(): any {\r\n    return this.registerForm.get('password')?.value;\r\n  }\r\n\r\n  getUsername(): any {\r\n    return this.registerForm.get('username')?.value;\r\n  }\r\n\r\n  getConfirmedPassword(): any {\r\n    return this.registerForm.get('confirmedPassword')?.value;\r\n  }\r\n\r\n}\r\n","export default \".error-label {\\n  font-size: 12px;\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZ2lzdGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQUE7RUFDQSxVQUFBO0FBQ0YiLCJmaWxlIjoicmVnaXN0ZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVycm9yLWxhYmVsIHtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgY29sb3I6IHJlZDtcclxufVxyXG4iXX0= */\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>Versus App</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content class=\\\"ion-padding\\\">\\r\\n  <ion-row>\\r\\n    <ion-col size=\\\"12\\\" size-sm=\\\"10\\\" offset-sm=\\\"1\\\" size-md=\\\"8\\\" offset-md=\\\"2\\\" size-lg=\\\"6\\\" offset-lg=\\\"3\\\" size-xl=\\\"4\\\"\\r\\n             offset-xl=\\\"4\\\">\\r\\n      <form [formGroup]=\\\"registerForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\r\\n        <ion-card>\\r\\n          <ion-card-header>\\r\\n            <ion-card-title class=\\\"ion-text-center\\\">{{'crear cuenta' | titlecase}}</ion-card-title>\\r\\n          </ion-card-header>\\r\\n          <ion-card-content>\\r\\n            <ion-item class=\\\"ion-padding-top\\\">\\r\\n              <ion-label position=\\\"stacked\\\">Email</ion-label>\\r\\n              <ion-input formControlName=\\\"email\\\" type=\\\"email\\\" placeholder=\\\"Email\\\" name=\\\"email\\\"></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-padding-top\\\">\\r\\n              <ion-label position=\\\"stacked\\\">Nombre de usuario</ion-label>\\r\\n              <ion-input formControlName=\\\"username\\\" type=\\\"text\\\"\\r\\n                 placeholder=\\\"Nombre de usuario\\\" name=\\\"username\\\">\\r\\n              </ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-padding-top\\\">\\r\\n              <ion-label position=\\\"stacked\\\">Contraseña</ion-label>\\r\\n              <ion-input formControlName=\\\"password\\\" type=\\\"password\\\" placeholder=\\\"Contraseña\\\" name=\\\"password\\\">\\r\\n              </ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item class=\\\"ion-padding-top\\\">\\r\\n              <ion-label position=\\\"stacked\\\">Repetir Contraseña</ion-label>\\r\\n              <ion-input formControlName=\\\"confirmedPassword\\\" type=\\\"password\\\" placeholder=\\\"Repetir Contraseña\\\"\\r\\n                         name=\\\"confirmedPassword\\\"\\r\\n                         (keyup)=\\\"validatePassword()\\\">\\r\\n              </ion-input>\\r\\n            </ion-item>\\r\\n            <ion-label class=\\\"error-label\\\" position=\\\"stacked\\\"\\r\\n               *ngIf=\\\"confirmedPassword.errors?.invalid\\\">Las contraseñas deben coincidir\\r\\n            </ion-label>\\r\\n            <ion-button [disabled]=\\\"!this.registerForm.valid\\\" class=\\\"ion-margin-top\\\"\\r\\n               expand=\\\"block\\\" type=\\\"submit\\\">Crear cuenta\\r\\n            </ion-button>\\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n      </form>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n</ion-content>\\r\\n\";"],"sourceRoot":"webpack:///"}